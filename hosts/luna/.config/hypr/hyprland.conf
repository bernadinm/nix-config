# Hyprland configuration file
# This configuration migrates settings from i3 to Hyprland

# Variables
$mod = ALT
$sup = SUPER

# Font settings
exec-once = gsettings set org.gnome.desktop.interface monospace-font-name 'monospace 8'
exec-once = gsettings set org.gnome.desktop.interface font-name 'monospace 8'

# Monitor setup
# Monitor setup
monitor=,preferred,auto,1

# DPI and scaling
exec-once = xrandr --output eDP1 --dpi 120

# Multi-monitor setup
exec-once = bash -c 'if [[ $(xrandr --current | grep " connected" | wc -l) > 1 ]]; then xrandr --output DP2 --auto --right-of eDP1; setxkbmap -option altwin:swap_lalt_lwin; else xrandr --output DP1 --output DP2 --off; setxkbmap -option; fi'

# Window rules
windowrulev2 = noborder, title:^(.*)$
windowrulev2 = float, class:^(float)$
windowrulev2 = float, title:^(scratchpad)$
windowrulev2 = workspace 6, class:^(notion)$
windowrulev2 = workspace special, class:^(float)$

# Input configuration
# Input configuration
input {
    kb_layout = us
    kb_variant = 
    kb_model = 
    kb_options = ctrl:swap_lalt_lwin
    kb_rules = 

    sensitivity = 0.0
    repeat_rate = 50
    repeat_delay = 300

    # Touchpad settings
    touchpad {
        natural_scroll = true
        tap-to-click = true
        drag_lock = false
        tap-and-drag = true
        tap-and-drag-temp-unlock = false
        middle_emulation = true
        disable_while_typing = true
        scroll_method = 
        clickfinger_behavior = 
        accel_speed = 0.65
        accel_profile = 
    }

    # Trackpoint settings
    # trackpoint {
    #     sensitivity = 1.0
    # }
}

# General settings
# Window management
general {
    gaps_in = 12
    gaps_out = 0
    border_size = 1
    allow_tearing = false
    col.active_border = rgba(78a5f0ff) # blue
    col.inactive_border = rgba(333344ff)
    layout = dwindle
}

# dwindle options
dwindle {
    pseudotile = yes
    preserve_split = yes
    force_split = no
    special_scale_factor = 0.8
    smart_gaps = no
}

# master layout options
master {
    new_on_top = true
    new_on_last = false
    mfact = 0.5
    push_follows_move = true
    push_to_master = false
}

# dwindle options
dwindle {
    pseudotile = yes
    preserve_split = yes
    force_split = no
    special_scale_factor = 0.8
    smart_gaps = no
}

# master layout options
master {
    new_on_top = true
    new_on_last = false
    mfact = 0.5
    push_follows_move = true
    push_to_master = false
}

# Window decorations
decoration {
    rounding = 0
    active_opacity = 1.0
    inactive_opacity = 1.0
    
    drop_shadow = true
    shadow_range = 7
    shadow_render_power = 3
    shadow_color = rgba(0000007f)
    
    blur {
        enabled = false
        size = 3
        passes = 1
        new_optimizations = true
        xray = false
        debug = false
    }
}

# Animation
animations {
    enabled = true
    beziers {
        linear = linear
        default = easeOutQuart
        menu = easeOutCubic
    }
    animations {
        borderangle = 1, default
        borders = 1, default
        colormonitors = 1, default
        fade = 1, default
        fadeinpopup = 1, menu
        manager = 1, default
        minimize = 1, default
        move = 1, default
        newfloat = 1, default
        newpopup = 1, menu
        resize = 1, default
        roundify = 1, default
        warp = 1, default
        winpos = 1, default
        workspaces = 1, default
    }
}

# Keybindings
bind = $mod, Return, exec, termite --title termite
bind = $mod, W, killactive, 
bind = $mod, SPACE, exec, rofi -show run

# Focus
# Focus
bind = $mod, H, movefocus, l
bind = $mod, J, movefocus, d
bind = $mod, K, movefocus, u
bind = $mod, L, movefocus, r

# Focus (alternative with arrow keys)
bind = $mod, LEFT, movefocus, l
bind = $mod, DOWN, movefocus, d
bind = $mod, UP, movefocus, u
bind = $mod, RIGHT, movefocus, r

# Move windows
# Move windows
bind = $mod SHIFT, H, movewindow, l
bind = $mod SHIFT, J, movewindow, d
bind = $mod SHIFT, K, movewindow, u
bind = $mod SHIFT, L, movewindow, r

# Move windows (alternative with arrow keys)
bind = $mod SHIFT, LEFT, movewindow, l
bind = $mod SHIFT, DOWN, movewindow, d
bind = $mod SHIFT, UP, movewindow, u
bind = $mod SHIFT, RIGHT, movewindow, r

# Workspaces
bind = $mod, 1, workspace, 1
bind = $mod, 2, workspace, 2
bind = $mod, 3, workspace, 3
bind = $mod, 4, workspace, 4
bind = $mod, 5, workspace, 5
bind = $mod, 6, workspace, 6
bind = $mod, 7, workspace, 7
bind = $mod, 8, workspace, 8
bind = $mod, 9, workspace, 9
bind = $mod, 0, workspace, 10

bind = $mod SHIFT, 1, movetoworkspace, 1
bind = $mod SHIFT, 2, movetoworkspace, 2
bind = $mod SHIFT, 3, movetoworkspace, 3
bind = $mod SHIFT, 4, movetoworkspace, 4
bind = $mod SHIFT, 5, movetoworkspace, 5
bind = $mod SHIFT, 6, movetoworkspace, 6
bind = $mod SHIFT, 7, movetoworkspace, 7
bind = $mod SHIFT, 8, movetoworkspace, 8
bind = $mod SHIFT, 9, movetoworkspace, 9
bind = $mod SHIFT, 0, movetoworkspace, 10

# Workspace switching
# Workspace navigation
bind = $sup, RIGHT, workspace, next
bind = $sup, LEFT, workspace, prev

# Move workspace between monitors
bind = CTRL SHIFT, RIGHT, moveworkspacetomonitor, next
bind = CTRL SHIFT, LEFT, moveworkspacetomonitor, prev

# Window toggles
bind = $mod, F, togglefloating, 
# Layout toggles
bind = $mod, S, layout, dwindle
bind = $mod, W, layout, master
bind = $mod, E, togglesplit, 
bind = $mod, F, fullscreen, 1
bind = $mod SHIFT, SPACE, togglefloating, 
bind = $mod SHIFT, V, togglespecial, 
bind = $mod, A, movefocus, master

# Resize mode
bind = $mod, R, submap, resize

submap = resize
    bind = , H, resizeactive, -10 0
    bind = , J, resizeactive, 0 10
    bind = , K, resizeactive, 0 -10
    bind = , L, resizeactive, 10 0
    bind = , LEFT, resizeactive, -10 0
    bind = , DOWN, resizeactive, 0 10
    bind = , UP, resizeactive, 0 -10
    bind = , RIGHT, resizeactive, 10 0
    bind = , RETURN, submap, 
    bind = , ESCAPE, submap, 
    bind = $mod, R, submap, 
submap = 

# Reload and exit
bind = $mod SHIFT, C, exec, hyprctl reload
bind = $mod SHIFT, Q, exit, 
bind = $mod SHIFT, E, exec, hyprctl dispatch exit

# Audio controls
bind = , XF86AudioRaiseVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ +10%
bind = , XF86AudioLowerVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ -10%
bind = , XF86AudioMute, exec, pactl set-sink-mute @DEFAULT_SINK@ toggle
bind = , XF86AudioMicMute, exec, pactl set-source-mute @DEFAULT_SOURCE@ toggle

# Brightness controls
bind = , XF86MonBrightnessDown, exec, brightnessctl set 1%-
bind = , XF86MonBrightnessUp, exec, brightnessctl set +1%

# Media controls
bind = , XF86AudioPlay, exec, playerctl play-pause
bind = , XF86AudioNext, exec, playerctl next
bind = , XF86AudioPrev, exec, playerctl previous

# Screenshot
# Screenshot
bind = , Print, exec, scrot '%Y-%m-%d-%H-%M-%S_$wx$h.png' -e 'mv $f ~/Pictures/Screenshots/'
bind = SHIFT, Print, exec, scrot -s '%Y-%m-%d-%H-%M-%S_$wx$h.png' -e 'mv $f ~/Pictures/Screenshots/'
bind = ALT, Print, exec, scrot -w '%Y-%m-%d-%H-%M-%S_$wx$h.png' -e 'mv $f ~/Pictures/Screenshots/'

# Lock screen
bind = $mod SHIFT, Q, exec, xautolock -locknow

# Application launchers
bind = $sup, N, exec, sh $HOME/.launch_notion.sh
bind = $sup, L, exec, sh $HOME/.launch_logseq.sh
bind = $sup, Y, exec, sh $HOME/.launch_youtube.sh
bind = $sup, I, exec, sh $HOME/.launch_instagram.sh
bind = $sup, M, exec, sh $HOME/.launch_music.sh
bind = $sup, F, exec, sh $HOME/.launch_googlefi.sh
bind = $sup, W, exec, sh $HOME/.launch_whatsapp.sh
bind = $sup, B, exec, sh $HOME/.launch_bible.sh
bind = $sup, C, exec, sh $HOME/.launch_chatgpt.sh
bind = $sup, A, exec, sh $HOME/.launch_audacity.sh
bind = $sup, E, exec, sh $HOME/.launch_businessmail.sh
bind = $sup, G, exec, sh $HOME/.launch_gmail.sh
bind = $sup, O, exec, sh $HOME/.launch_github.sh
bind = $sup, K, exec, sh $HOME/.launch_googlekeep.sh
bind = $sup, P, exec, sh $HOME/.launch_protonmail.sh
bind = $sup, D, exec, sh $HOME/.launch_drive.sh

# Bluetooth toggle (Shift+F10)
bind = SHIFT, F10, exec, bash -c 'if lsmod | grep -q btusb; then sudo modprobe -r btusb && notify-send "Bluetooth Disabled" "Hardware powered off"; else sudo modprobe btusb && sudo systemctl restart bluetooth && notify-send "Bluetooth Enabled" "Hardware ready"; fi'

# Autostart applications
exec-once = xss-lock --transfer-sleep-lock -- i3lock --nofork
exec-once = nm-applet
exec-once = compton --config /home/miguel/.compton.conf
exec-once = xdg-settings set default-web-browser firefox.desktop
exec-once = unclutter --timeout 3 &
exec-once = xfce4-power-manager
exec-once = $HOME/.fehbg
exec-once = xautolock -detectsleep -time 30 -locker "i3lock-fancy-rapid 15 30" -notify 30 -notifier "notify-send -u critical -t 10000 -- 'LOCKING screen in 30 seconds'"
exec-once = libinput-gestures
exec-once = protonmail-bridge -g
exec-once = bash ~/.avoid_sleeping_while_streaming.sh
exec-once = sudo modprobe -r psmouse && sudo modprobe psmouse
exec-once = waybar
exec-once = xrandr --output eDP1 --dpi 120
exec-once = bash -c 'if [[ $(xrandr --current | grep " connected" | wc -l) > 1 ]]; then xrandr --output DP2 --auto --right-of eDP1; setxkbmap -option altwin:swap_lalt_lwin; else xrandr --output DP1 --output DP2 --off; setxkbmap -option; fi'
exec-once = xinput set-float-prop 12 'libinput Accel Speed' .65
exec-once = xrandr --output eDP1 --brightness 1
exec-once = synclient TapButton1=1
exec-once = synclient TapButton2=3
exec-once = synclient ClickFinger2=1
exec-once = synclient TapButton3=0
exec-once = synclient ClickFinger3=0
exec-once = synclient HorizTwoFingerScroll=1
exec-once = synclient VertTwoFingerScroll=1
exec-once = xinput set-prop 12 "Device Accel Constant Deceleration" 0.9
exec-once = bash -c 'while true; do bash ~/.battery_check.sh; sleep 90; done'
exec-once = dunst
